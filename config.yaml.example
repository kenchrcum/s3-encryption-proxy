listen_addr: ":8080"
log_level: "info"
# proxied_bucket: ""  # Optional: If set, the gateway will only proxy requests for this specific bucket
                      # Set via PROXIED_BUCKET env var

backend:
  endpoint: "https://s3.amazonaws.com"
  region: "us-east-1"
  access_key: ""  # Set via BACKEND_ACCESS_KEY env var
  secret_key: ""   # Set via BACKEND_SECRET_KEY env var
  provider: ""  # Optional: provider name for reference (any S3-compatible API endpoint works)
  use_ssl: true
  # filter_metadata_keys: []  # Optional: Comma-separated list of metadata keys to filter out
  #                           # Useful for S3 backends that reject certain metadata keys
  #                           # Set via BACKEND_FILTER_METADATA_KEYS env var
  # use_client_credentials: false  # Optional: If true, extract and use credentials from client requests
  #                                 # When enabled, the gateway will use the client's credentials for backend access,
  #                                 # respecting their access rights. REQUIRES credentials in every request.
  #                                 # Backend access_key and secret_key are NOT required when this is enabled.
  #                                 # 
  #                                 # SUPPORTED: Query parameters (AWSAccessKeyId, AWSSecretAccessKey in URL)
  #                                 # NOT SUPPORTED: AWS Signature V4 (Authorization header) - signature validation fails
  #                                 #   because the signature includes the Host header, and forwarding changes it.
  #                                 # 
  #                                 # If credentials cannot be extracted, the request will fail (no fallback).
  #                                 # Set via BACKEND_USE_CLIENT_CREDENTIALS env var

encryption:
  password: ""     # Set via ENCRYPTION_PASSWORD env var
  preferred_algorithm: "AES256-GCM"  # Options: AES256-GCM, ChaCha20-Poly1305
  supported_algorithms:
    - "AES256-GCM"
    - "ChaCha20-Poly1305"
  chunked_mode: true  # Enable chunked/streaming encryption (default: true)
  chunk_size: 65536   # Chunk size in bytes (default: 65536 = 64KB). Range: 16KB-1MB
  key_manager:
    enabled: false  # Set to true to enable key rotation/KMS mode (default: single password mode)

compression:
  enabled: false
  min_size: 1024
  content_types:
    - "text/plain"
    - "application/json"
    - "application/xml"
  algorithm: "gzip"
  level: 6

server:
  read_timeout: "15s"
  write_timeout: "15s"
  idle_timeout: "60s"
  read_header_timeout: "10s"
  max_header_bytes: 1048576
  # disable_multipart_uploads: false  # Optional: Set to true to disable multipart uploads entirely
  #                                   # This ensures all uploaded data is encrypted, but prevents multipart uploads
  #                                   # Set via SERVER_DISABLE_MULTIPART_UPLOADS env var

tls:
  enabled: false
  cert_file: ""  # Set via TLS_CERT_FILE env var
  key_file: ""   # Set via TLS_KEY_FILE env var

rate_limit:
  enabled: false
  limit: 100     # Requests per window
  window: "60s"  # Time window for rate limiting

cache:
  enabled: false
  max_size: 104857600    # 100MB in bytes
  max_items: 1000
  default_ttl: "5m"       # 5 minutes

audit:
  enabled: false
  max_events: 10000       # Maximum events to keep in memory